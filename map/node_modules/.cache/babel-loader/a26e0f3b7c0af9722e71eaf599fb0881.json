{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Documents\\\\GitHub\\\\map\\\\map\\\\src\\\\components\\\\Map.jsx\";\nimport React from \"react\";\nimport L from 'leaflet';\nimport { Map, TileLayer, ZoomControl, VideoOverlay } from \"react-leaflet\";\nimport Basemap from './Basemaps';\nimport GeojsonLayer from '../layers/GeojsonLayerFunc';\nimport VelocityLayer from \"../layers/VelocityLayer\";\nimport '../css/Map.css';\nimport { connect } from \"react-redux\";\n\n// указываем путь к файлам marker\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nL.Icon.Default.imagePath = \"https://unpkg.com/leaflet@1.5.0/dist/images/\";\nclass MapComponent extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      // Установите координаты для Целинского района Ростовской области\n      lat: 46.536032,\n      // Широта\n      lng: 41.031736,\n      // Долгота\n      zoom: 10,\n      // Увеличение для более детального просмотра\n      basemap: 'osm'\n    };\n    this.onBMChange = bm => {\n      this.setState({\n        basemap: bm\n      });\n    };\n  }\n  render() {\n    // console.log(this.props);\n    const layersTypes = {\n      'geojson': GeojsonLayer,\n      'velocityLayer': VelocityLayer,\n      'videoOverlay': VideoOverlay\n    };\n    let center = [this.state.lat, this.state.lng];\n    const basemapsDict = {\n      osm: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n      hot: \"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png\",\n      dark: \"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}@2x.png\",\n      cycle: \"https://dev.{s}.tile.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png\"\n    };\n    const bounds = [[46.5, 40.9],\n    // Юго-западная точка (примерные координаты Цилины)\n    [46.6, 41.2] // Северо-восточная точка (примерные координаты Цилины)\n    ];\n    return /*#__PURE__*/_jsxDEV(Map, {\n      zoomControl: false,\n      zoom: this.state.zoom,\n      center: center,\n      minZoom: 8 // Минимальный зум, чтобы позволить приближение\n      ,\n      maxZoom: 18 // Максимальный зум для детального просмотра\n      ,\n      bounds: bounds // Устанавливаем границы карты\n      ,\n      className: \"map\",\n      maxBounds: bounds // Ограничиваем перемещение за пределы области\n      ,\n      maxBoundsVisibilty: true // Включаем видимость границ\n      ,\n      dragging: true // Разрешаем перетаскивание карты\n      ,\n      children: [/*#__PURE__*/_jsxDEV(ZoomControl, {\n        position: 'bottomright'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"&copy <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: basemapsDict[this.state.basemap]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Basemap, {\n        basemap: this.state.basemap,\n        onChange: this.onBMChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), this.props.layers.map(l => {\n        if (l.visible) {\n          let LayerComp = layersTypes[l.type];\n          return /*#__PURE__*/_jsxDEV(LayerComp, {\n            ...l.options\n          }, l.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 17\n          }, this);\n        }\n      }), /*#__PURE__*/_jsxDEV(Marker, {\n        position: center,\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"\\u0412\\u044B\\u0431\\u0440\\u0430\\u043D\\u0430 \\u0442\\u0435\\u043C\\u0430 \", this.state.basemap]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 20\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this);\n  }\n}\n;\nconst mapStateToProps = state => {\n  return {\n    layers: state.layers\n  };\n};\nexport default connect(mapStateToProps)(MapComponent);","map":{"version":3,"names":["React","L","Map","TileLayer","ZoomControl","VideoOverlay","Basemap","GeojsonLayer","VelocityLayer","connect","jsxDEV","_jsxDEV","Icon","Default","imagePath","MapComponent","Component","constructor","args","state","lat","lng","zoom","basemap","onBMChange","bm","setState","render","layersTypes","center","basemapsDict","osm","hot","dark","cycle","bounds","zoomControl","minZoom","maxZoom","className","maxBounds","maxBoundsVisibilty","dragging","children","position","fileName","_jsxFileName","lineNumber","columnNumber","attribution","url","onChange","props","layers","map","l","visible","LayerComp","type","options","id","Marker","Popup","mapStateToProps"],"sources":["C:/Users/user/Documents/GitHub/map/map/src/components/Map.jsx"],"sourcesContent":["import React from \"react\";\r\nimport L from 'leaflet';\r\nimport { Map, \r\n  TileLayer, \r\n  ZoomControl,\r\n  VideoOverlay } from \"react-leaflet\";\r\nimport Basemap from './Basemaps';\r\nimport GeojsonLayer from '../layers/GeojsonLayerFunc';\r\nimport VelocityLayer from \"../layers/VelocityLayer\";\r\nimport '../css/Map.css';\r\nimport { connect } from \"react-redux\";\r\n\r\n// указываем путь к файлам marker\r\nL.Icon.Default.imagePath = \"https://unpkg.com/leaflet@1.5.0/dist/images/\";\r\n\r\nclass MapComponent extends React.Component {\r\n  state = {\r\n    // Установите координаты для Целинского района Ростовской области\r\n    lat: 46.536032,  // Широта\r\n    lng: 41.031736, // Долгота\r\n    zoom: 10,     // Увеличение для более детального просмотра\r\n    basemap: 'osm',\r\n  };\r\n\r\n  onBMChange = (bm) => {\r\n    this.setState({\r\n      basemap: bm\r\n    });\r\n  }\r\n\r\n  render() {\r\n    // console.log(this.props);\r\n    const layersTypes = {\r\n      'geojson': GeojsonLayer,\r\n      'velocityLayer': VelocityLayer,\r\n      'videoOverlay': VideoOverlay\r\n    }\r\n    let center = [this.state.lat, this.state.lng];\r\n\r\n    const basemapsDict = {\r\n      osm: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\r\n      hot: \"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png\",\r\n      dark: \"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}@2x.png\",\r\n      cycle: \"https://dev.{s}.tile.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png\"\r\n    }\r\n\r\n    const bounds = [\r\n      [46.5, 40.9], // Юго-западная точка (примерные координаты Цилины)\r\n      [46.6, 41.2]   // Северо-восточная точка (примерные координаты Цилины)\r\n    ];\r\n\r\n    return (\r\n        <Map\r\n          zoomControl={false}\r\n          zoom={this.state.zoom}\r\n          center={center}\r\n          minZoom={8} // Минимальный зум, чтобы позволить приближение\r\n          maxZoom={18} // Максимальный зум для детального просмотра\r\n          bounds={bounds} // Устанавливаем границы карты\r\n          className=\"map\"\r\n          maxBounds={bounds} // Ограничиваем перемещение за пределы области\r\n          maxBoundsVisibilty={true} // Включаем видимость границ\r\n          dragging={true} // Разрешаем перетаскивание карты\r\n        >\r\n            \r\n          <ZoomControl position={'bottomright'} />\r\n          \r\n          <TileLayer\r\n            attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n            url={basemapsDict[this.state.basemap]}\r\n          />\r\n          <Basemap basemap={this.state.basemap} onChange={this.onBMChange} />\r\n\r\n          {this.props.layers.map( l => {\r\n            if (l.visible) {\r\n              let LayerComp = layersTypes[l.type];\r\n              return (\r\n                <LayerComp key={l.id} {...l.options}/>\r\n              )\r\n            }\r\n          })}\r\n\r\n        \r\n          <Marker position={center}>\r\n            <Popup><div>Выбрана тема {this.state.basemap}</div></Popup>\r\n          </Marker>\r\n        </Map>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    layers: state.layers\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(MapComponent);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}